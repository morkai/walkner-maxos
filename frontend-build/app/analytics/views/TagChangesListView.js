// Copyright (c) 2014, ≈Åukasz Walukiewicz <lukasz@walukiewicz.eu>. Some Rights Reserved.
// Licensed under CC BY-NC-SA 4.0 <http://creativecommons.org/licenses/by-nc-sa/4.0/>.
// Part of the walkner-hydro project <http://lukasz.walukiewicz.eu/p/walkner-hydro>

define(["app/i18n","app/time","app/core/views/ListView"],function(e,i,a){"use strict";return a.extend({serializeColumns:function(){var i=[{id:"t",label:e("analytics","PROPERTY:time"),className:"is-min"}];return this.isAverage()?i.push({id:"v",label:e("analytics","PROPERTY:value:avg"),className:"is-min"},{id:"n",label:e("analytics","PROPERTY:value:min"),className:"is-min"},{id:"x",label:e("analytics","PROPERTY:value:max")}):i.push({id:"v",label:e("analytics","PROPERTY:value")}),i},serializeActions:function(){return null},serializeRow:function(e){var a=e.toJSON();switch(a.t=i.format(a.t,"YYYY-MM-DD, HH:mm:ss"),typeof a.v){case"number":a.v=(Math.round(100*a.v)/100).toLocaleString(),a.n&&(a.n=(Math.round(100*a.n)/100).toLocaleString()),a.x&&(a.x=(Math.round(100*a.x)/100).toLocaleString());break;case"boolean":a.v=a.v?"TRUE":"FALSE"}return a},isAverage:function(){return this.collection.length>0&&!isNaN(this.collection.first().get("x"))}})});