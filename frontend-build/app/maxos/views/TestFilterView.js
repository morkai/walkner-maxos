// Part of <https://miracle.systems/p/walkner-maxos> licensed under <CC BY-NC-SA 4.0>

define(["underscore","app/core/util/fixTimeRange","app/core/views/FilterView","app/maxos/templates/filter"],function(e,t,r,i){"use strict";return r.extend({template:i,events:e.assign({"input #-itemNumber":"toggleItemNumber","mouseup #-status > .btn":function(e){var t=e.currentTarget,r=t.firstElementChild;r.checked&&setTimeout(function(){t.classList.remove("active"),r.checked=!1},1)}},r.prototype.events),defaultFormData:{status:"",startedAt:"",orderNo:"",itemNumber:""},termToForm:{startedAt:function(e,r,i){t.toFormData(i,r,"date+time")},"order._id":function(e,t,r){r.orderNo=t.args[1]},itemNumber:function(e,t,r){r[e]=t.args[1]},status:"itemNumber"},serializeFormToQuery:function(e){var r=this.getButtonGroupValue("status"),i=t.fromView(this),s=this.$id("orderNo").val().trim(),o=this.$id("itemNumber").val().trim();r&&e.push({name:"eq",args:["status",r]}),i.from&&e.push({name:"ge",args:["startedAt",i.from]}),i.to&&e.push({name:"le",args:["startedAt",i.to]}),s.length&&e.push({name:"eq",args:["order._id",s]}),o.length&&e.push({name:"eq",args:["itemNumber",+o]})},afterRender:function(){r.prototype.afterRender.apply(this,arguments),this.toggleButtonGroup("status"),this.toggleItemNumber()},toggleItemNumber:function(){this.$id("orderNo").prop("required",this.$id("itemNumber").val().length>0)}})});