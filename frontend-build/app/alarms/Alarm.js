// Part of <https://miracle.systems/p/walkner-maxos> licensed under <CC BY-NC-SA 4.0>

define(["../i18n","../time","../core/Model"],function(t,e,a){"use strict";var i={STOPPED:0,RUNNING:1,ACTIVE:2},s={MANUAL:"manual",NEGATED:"negated",SPECIFIED:"specified"},n={debug:"debug",info:"info",success:"success",warning:"warning",error:"danger"},r=a.extend({urlRoot:"/alarms",clientUrlRoot:"#alarms",topicPrefix:"alarms",privilegePrefix:"ALARMS",nlsDomain:"alarms",labelAttribute:"name",defaults:function(){return{name:"",state:i.STOPPED,severity:null,actionIndex:-1,lastStateChangeTime:0,startCondition:"",startActions:[],stopConditionMode:s.NEGATED,stopCondition:"",stopActions:[]}},serialize:function(){var a=this.toJSON();return a.data={id:a._id,state:a.state},a.stateText=t("alarms","state:"+a.state),a.lastStateChangeTimeText=e.format(a.lastStateChangeTime,"LL, HH:mm:ss"),a},serializeRow:function(){var t=this.serialize();return t.className="alarms-list-item "+this.getSeverityClassName(),t.dataAttrs={state:t.state},t},getSeverityClassName:function(){return n[this.get("severity")]||""}});return r.State=i,r.StopConditionMode=s,r.SEVERITY_TO_CLASS_NAME=n,r});